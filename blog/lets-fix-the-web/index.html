<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Let's Fix The Web</title><meta name="description" content="I am heavily frustrated from the way the Web works today. Everything seems to be broken beyond reason. I really want to fix the damn thing but I realize that it is not up to me to do that. It is up to all of us to make sure that code is written in the most secure possible way. Can we do that? Perhaps not! What can we do then?"><meta property="name" content="Let's Fix The Web"><meta itemprop="name" content="Let's Fix The Web"><meta property="description" content="I am heavily frustrated from the way the Web works today. Everything seems to be broken beyond reason. I really want to fix the damn thing but I realize that it is not up to me to do that. It is up to all of us to make sure that code is written in the most secure possible way. Can we do that? Perhaps not! What can we do then?"><meta itemprop="description" content="I am heavily frustrated from the way the Web works today. Everything seems to be broken beyond reason. I really want to fix the damn thing but I realize that it is not up to me to do that. It is up to all of us to make sure that code is written in the most secure possible way. Can we do that? Perhaps not! What can we do then?"><meta property="image" content="http://s.wordpress.com/mshots/v1/https%3A%2F%2Fwww.gnucitizen.org%2Fblog%2Flets-fix-the-web%2F?w=1024"><meta itemprop="image" content="http://s.wordpress.com/mshots/v1/https%3A%2F%2Fwww.gnucitizen.org%2Fblog%2Flets-fix-the-web%2F?w=1024"><meta property="og:type" content="website"><meta property="og:url" content="https://www.gnucitizen.org/blog/lets-fix-the-web/"><meta property="og:title" content="Let's Fix The Web"><meta property="og:description" content="I am heavily frustrated from the way the Web works today. Everything seems to be broken beyond reason. I really want to fix the damn thing but I realize that it is not up to me to do that. It is up to all of us to make sure that code is written in the most secure possible way. Can we do that? Perhaps not! What can we do then?"><meta property="og:image" content="http://s.wordpress.com/mshots/v1/https%3A%2F%2Fwww.gnucitizen.org%2Fblog%2Flets-fix-the-web%2F?w=1024"><meta name="twitter:title" content="Let's Fix The Web"><meta name="twitter:description" content="I am heavily frustrated from the way the Web works today. Everything seems to be broken beyond reason. I really want to fix the damn thing but I realize that it is not up to me to do that. It is up to all of us to make sure that code is written in the most secure possible way. Can we do that? Perhaps not! What can we do then?"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="http://s.wordpress.com/mshots/v1/https%3A%2F%2Fwww.gnucitizen.org%2Fblog%2Flets-fix-the-web%2F?w=1024"><link type="text/css" href="/blog.css" rel="stylesheet"><script type="text/javascript" src="/blog.js"></script></head><body><header id="header"></header><nav id="topnav"><ul><li><a href="/">Home</a></li><li><a href="/projects.html">Projects</a></li><li><a href="/files">Files</a></li><li><a href="/about.html">About</a></li></ul></nav><article><div id="content"><h1 class="title">Let's Fix The Web</h1><div class="date">Sun, 31 Aug 2008 08:12:25 GMT</div><div class="author">by pdp</div><div id="post-content"><p>I am heavily frustrated from the way the Web works today. Everything seems to be broken beyond reason. I really want to fix the damn thing but I realize that it is not up to me to do that. It is up to all of us to make sure that code is written in the most secure possible way. Can we do that? Perhaps not! What can we do then?</p>
<p>Before I get to the point, I need to tell you how I fixed my insecure Wordpress blog. Wordpress has many security shortcomings and I was so frustrated that I decided to fix whatever I can once and for all. I believe that we can fix the Web in a similar way, but first these are all the patches that were implemented:</p>
<ul>
<li>mark all cookies as <code>secure</code> to prevent leakage over unencrypted channels</li>
<li>mark all cookies as <code>httpOnly</code> to prevent session hijacks due to Cross-site Scripting vulnerabilities</li>
<li>if you try to login, force SSL to prevent leakage of credentials and other sensitive data</li>
<li>when logged in, make sure that all URLs are HTTPS enabled to prevent leakage of sensitive information</li>
<li>when over HTTPS make sure that all URLs that point to your domain start with <code>https://</code> to prevent leakage of any data</li>
<li>restrict 443 (HTTPS) to blog users and admins only</li>
<li>disable error messages everywhere to prevent leakage of sensitive information</li>
<li>allow upload of only known file types such as jpg, gif and png (I will add a check for the <a href="/blog/gifars-and-other-issues/">gifar</a> problem soon)</li>
<li>embed an IDS type of solution (<a href="http://php-ids.org">PHPIDS</a> in my case) to block known attacks</li>
<li>integrate with blogsecurify to enable continues security checks and warn the admin if a problem is found</li>
</ul>
<p>I believe that this makes the blog a lot more secure. There still might be ways to attack it but this is all I can do in the most reasonable possible way, without completely breaking Wordpress. All of these fixes are implemented as a plugin which I will make available for free download soon.</p>
<p>So how can we fix the Web? I have a few ideas in mind and all of them can be implemented. Here they are:</p>
<ul>
<li>allow the user to sandbox and unsandbox applications and web resources with a single click</li>
<li>sandbox by default known applications such as GMail, Yahoo Mail, etc.</li>
<li>in the sandbox, mark all cookies as <code>secure</code> to prevent session leaks</li>
<li>in the sandbox, mark all session cookies as <code>httpOnly</code> to prevent session hijacks due to XSS</li>
<li>make sure that while on HTTPS, all embedded resources are delivered over HTTPS as well.</li>
<li>provide the option to turn off JavaScript, JAVA, Flash, SilverLight, etc on per-sandbox basis</li>
<li>block any external requests to sandboxed applications</li>
<li>implement the PHPIDS signature matching mechanism in JavaScript</li>
<li>if the HTML structure is heavily broken, block the page to prevent some types of persistent XSS</li>
<li>record ssl signatures on trusted network and warn if signature changes while on untrusted network</li>
</ul>
<p>I think that this type of solution will make the Web a lot more secure. It definitely wont fix it, but it will make the majority of attacks not easy at all. It will block the majority of CSRF and XSS attacks. It will provide certain mitigations against persistent XSS attacks. It will provide some mitigations against Browser exploits which employ Flash or Java technology to exploit the browser. It is not perfect, but it looks good enough to me.</p>
<p>Next stop: actually fixing the browser!</p>
</div><div id="post-comments"><p><em>Archived Comments</em></p><div class="post-comment"><img class="post-comment-avatar" src="//gravatar.com/avatar/fee778a87c72dfd3dc36f3b4f19765b7?s=256&amp;d=retro" alt="just me"><span class="post-comment-author">just me</span><div class="post-comment-content">Your ideas are very good, I wonder if a similar thing can be done for other commonly used web site applications, such as phpNuke and Invision Power Board</div></div><div class="post-comment"><img class="post-comment-avatar" src="//gravatar.com/avatar/be3b138352dc100c9459e612b275b413?s=256&amp;d=retro" alt="mindcorrosive"><span class="post-comment-author">mindcorrosive</span><div class="post-comment-content">Your ideas, of course, suggest that the users are educated about secure browsing and are impenetrable to stupidity - which is hardly the case, considering the amount of non-technical privacy and security breaches we see these days. 
The power users already know how to fix the things and do not need much more security - it's all the others irresponsible individuals that need to be educated in the first place, instead of trying to invent an imaginary fool-proof technology..</div></div><div class="post-comment"><img class="post-comment-avatar" src="//gravatar.com/avatar/0367b81839d31a5fa3d7bea79ef71b9e?s=256&amp;d=retro" alt="Adrian 'pagvac' Pastor"><span class="post-comment-author">Adrian 'pagvac' Pastor</span><div class="post-comment-content">It's worth it mentioning that if someone is in the same Wi-Fi network as you, SSL alone won't protect you against session hijacking:

https://www.defcon.org/html/defcon-16/dc-16-speakers.html#Perry
http://enablesecurity.com/2008/08/11/surf-jack-https-will-not-save-you/</div></div><div class="post-comment"><img class="post-comment-avatar" src="//gravatar.com/avatar/c4db4e65c9f09f2a373fcaefa5e2bfb4?s=256&amp;d=retro" alt="pdp"><span class="post-comment-author">pdp</span><div class="post-comment-content">just me, yes!

mindcorrosive, you are right but this is exactly why some mainstream applications like GMail and Yahoo Mail will be protected by default. Also, I am thinking that the browser should ask you how much you trust the current network, every time the network settings change.

adrian, why not? we force SSL, we compare the self-signed signatures against a list of SHA1 collected while being on a trusted network, we force <code>secure</code> and <code>httpOnly</code> cookies. this setup should make you feel save even on very unsafe networks.</div></div><div class="post-comment"><img class="post-comment-avatar" src="//gravatar.com/avatar/c4e8bfccc476a6ac99cbf85737a2b25b?s=256&amp;d=retro" alt="pepe"><span class="post-comment-author">pepe</span><div class="post-comment-content">yeah...lets make millions of websites, millions of lines of code secure by telling everyone what rules they should obey...it worked so well for open smtp relays..it works so well for phishing...

Lets just list all the things that could break and implement a measure against it. It works so well with AV software suites...

Its good to be in the security field: Everyone constantly assures that there's new work to do next week..</div></div><div class="post-comment"><img class="post-comment-avatar" src="//gravatar.com/avatar/be3b138352dc100c9459e612b275b413?s=256&amp;d=retro" alt="mindcorrosive"><span class="post-comment-author">mindcorrosive</span><div class="post-comment-content">pdp: still, it boils down to "trust". How much do you trust your ISP? Your government? Yahoo and Google, for that matter?
Without a trusting model from the bottom up, it is impossible to guarantee security - it is simply "security by obscurity", i.e. malicious crackers lack the sheer labor force to harvest the web and the average inhabitants at large scale, giving the imagery of "security". Please note that I don't underestimate your efforts in that respect, I just point out what is probably obvious to everyone.

I agree that secured connections are the way to go, but what good is an 4096-bit SHA-1 encrypted SSH connection to a non-trusted host?

I would suggest that both parties need to identify each other - both the server and the client. What is done today is server-side only, in most occasions. Client-side is still dependent on the human factor - and that probably constitutes the largest share of security breaches these days. Why not issuing a government-signed certificate to everyone - the way we get ID papers? Of course, that creates more problems along a way, but might be a solution in the near future.</div></div><div class="post-comment"><img class="post-comment-avatar" src="//gravatar.com/avatar/c26704aa7b55355611d52834c44d7d1d?s=256&amp;d=retro" alt="Jeff Williams"><span class="post-comment-author">Jeff Williams</span><div class="post-comment-content">It's not easy to do all of the things in your list in some environments. The OWASP ESAPI project is defining an security API that encourages developers to do these things. The Java implementation has been released for almost a year, and the .NET and PHP implementations are in progress.</div></div><div class="post-comment"><img class="post-comment-avatar" src="//gravatar.com/avatar/c4db4e65c9f09f2a373fcaefa5e2bfb4?s=256&amp;d=retro" alt="pdp"><span class="post-comment-author">pdp</span><div class="post-comment-content">mindcorrosive, well you cannot be 100% sure but you still trust some networks more then others. the plugin will detect if you are changing network settings and thus will ask you how much you trust the network you are in. if you are not trusting it as much as your home network then the plugin will match any data it gets from the web apps you are visiting against a trusted model built previously. I think that it makes sense.

Jeff, I think that the project is very interesting but I doubt that you will be able to force it on developers. WebApp firewalls are such a hot topic at the moment simply because you don't have to deal with developers. They are not perfect but provide that transparency that satisfies most people. My proposal for this firefox extension aims to do to the client-side what webapp firewalls do for the server-side. No more then that - a simple, elegant, yet effective solution.</div></div></div></div></article><footer id="footer"><p>Copyright &copy; 2021 <a href=""></a>. All rights reserved.</p></footer></body></html>